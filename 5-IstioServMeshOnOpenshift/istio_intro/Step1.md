# 第一步
###### 快捷链接
[场景综述](../istio_intro.md) <br>
[下一步](Step2.md) <br>

#### 操作过程
[本场景没有操作步骤只有Istio基础概念解释](#概念解释) <br>

### 概念解释
什么是服务网格，为什么我们需要它？<br>
术语"服务网格"用于描述组成此类应用程序的微服务网络及其之间的交互。随着服务网格的大小和复杂性的增长，它变得越来越难以理解和管理。它的要求通常包括-发现，负载平衡，故障恢复，指标和监视。服务网格通常还具有更复杂的操作要求，例如 A/B 测试，金丝雀部署，速率限制，访问控制和端到端身份验证等等。<br>
![#f03c15]`#f03c15`以上是 Redhat 官方给出的解释，但是我要强调的是，在现在技术理论中，无论那种技术，都是以“以资源来交换便利性”为基础的。 Istio 或是任何一种其它的服务网格技术也都是如此。Istio 从出现之初在国内被人质疑的就是性能降低的问题。其实这个问题是不用尝试 Istio 也可以理解的。将一个完整的服务被拆成若干个相互沟通的单元服务，并且在其中增加了 SideCar 这样的代理点，这一切自然是会降低性能的。但大家考虑为什么要或是要不要使用服务网格时，一定要同时考虑到 Istio 这样的技术为什么会在 Kubernetes 这个技术成熟后才成为关注焦点。这是因为 Kubernetes 提供的多 Pod 共同支撑一个单元业务运行在跨网络计算资源这种基础技术架构为整体性能提供了一种浮动式调整的机制，这意味着你可以随时让跨网络 4 Coer CPU 执行的业务变为跨网络 8 Core CPU 执行，不受任何物理范围及其它原因的限制。这就式真正的业务目标可以抽象的在集群化计算资源上浮动调整，那么以 Istio 为例，它所额外的消耗可以很容易的均摊到更多的计算资源上去。只要可以完整单位时间的业务目标，谁又在乎多话费一些计算资源呢？何况多花费的计算资源还会因为 Kubernetes 的跨网络调度机制，通过计算资源利用率的提高弥补回来，我们甚至不需要多购买新的硬件就可以获取更多可用的计算资源。 这就是为什么我总想向我的客户解释， 在考虑服务网格是否适合真实业务需求时，用户其实并不需要更多的关注于 Istio 究竟带来了多少指定资源内的性能下降，而是应该考虑完成既定业务目标 （例如设定原业务预期的单元测试的TPCC值）预期下，我们需要多花费多少计算资源（Pod 数量和 CPU 配额）。在此基础之上，如果我们判断了我们可接受计算资源的额外开销，那么接下来我们要判断的就是服务网格是否能给我们带来我们所需的好处了。<br>

Istio提供了整个服务网格上的行为洞察力和操作控制，从而提供了一个完整的解决方案来满足微服务应用程序的各种需求。它在服务网络中统一提供许多关键功能：
   - Traffic Management 流量控制。控制服务之间的流量和API调用流，使调用更可靠，并在不利条件下使网络更健壮。
   - Observability  可观察性。了解服务之间的依赖性以及服务之间的流量的性质和流，从而能够快速发现问题。
   - Policy Enforcement 政策执行。将组织策略应用于服务之间的交互，确保访问策略得到实施，并且资源在消费者之间公平分配。策略更改是通过配置网格进行的，而不是通过更改应用程序代码来进行的。
   - Service Identity and Security 服务身份和安全性。为网状网络中的服务提供可验证的身份，并提供保护服务流量的能力，使其流经不同程度的信任度的网络。

除了这些行为之外，Istio还具有可扩展性，可以满足各种部署需求：
   - Platform Support 平台支持。 Istio旨在在多种环境中运行，包括跨Cloud，本地，Kubernetes，Mesos等的环境。我们最初专注于Kubernetes，但正在努力为其他环境提供支持。
   - Integration and Customization 集成和定制。可以扩展和定制策略执行组件，以与现有的ACL，日志记录，监视，配额，审计等解决方案集成。

这些功能极大地减少了应用程序代码，基础平台和策略之间的耦合。这种减少的耦合不仅使服务更易于实现，而且使运营商更容易在环境之间或新的策略方案之间移动应用程序部署。结果，应用程序本来就变得更加可移植。

<h color="red">从上面的能力描述我们可以看出， Istio 作为服务网格解决方案，主要解决四个方向的问题，流量控制、执行监控、访问策略插入、身份和安全控制插入。当然这四个方面扩展出去可以有无限多的可能性，也就是说为什么要用服务网格可以有任意多种理由，但是为什么不使用 Istio 就可以简单的以一个标准来衡量。如果从根本上就不需要控制业务执行的数据流量、不需要理解业务内部执行的逻辑、不需要随业务执行增加新的执行可能性、不需要动态协调执行的安全问题，这四者并存那么你一定不需要服务网格。其实这么解释我们也可以从某些特定场景上来理解，假如我们碰到一个业务，它执行了好几年，业务职能正常，开发者已经找不到了，我也不想对他的执行环境做任何调整，它的改变对于业务盈利没有什么促进，那么我们当然不需要把它搞成服务网格。它最多可以成为某个沉淀业务单元或是原子化服务的后端。微服务什么的还是弄到那些更能促进业务收入的方向比较好。</h>

什么是流量？
使用 Istio 的流量管理模型从本质上将流量与基础架构扩展脱钩，让操作者通过 Pilot 指定他们希望流量遵循哪些规则，而不是哪些特定的 Pod/VM 应该接收流量- Pilot 和智能 Envoy 代理负责其余任务。因此，例如，您可以通过 Pilot 指定您希望特定服务的5％流量转到金丝雀（ Canary ）版本，而与金丝雀部署的大小无关，或者根据请求的内容将流量发送到特定版本。
<h color="red"> Istio 解决方案中，对流量控制是一个很诱人的能力，它可以实现若干种平时我们趋之若鹜的“神”操作，例如神不知鬼不觉的替换一个版本，不管是更新一个还是回退一个，抑或是偷偷的尝试了一个版本。即使不上线也可以使用流量镜像能力将现有业务流在测试业务版本下进行现实业务场景测试。这样的测试才能保障业务在上线后真实按照测试期的预测结果完成业务目标，而不至于每次新业务更迭都要经历无法预期的“生死考验”。</h>


[回到顶部](#第一步)
[下一步骤](Step2.md)